<zk>
	<window id="winActualizarNoticia"
		title="Configuración Web :: Actualizar Noticias" border="normal"
		width="auto" height="auto" contentStyle="overflow:auto"
		apply="org.zkoss.bind.BindComposer" closable="true"
		viewModel="@id('vm') @init('sigarep.viewmodels.maestros.VMnoticia')">
		<groupbox id="grbNoticia">
			<caption label="Registrar Noticia" />
		<grid  width="auto">
			<columns>
				<column label="" width="70%"></column>
				<column label="" width="30%"></column>
			</columns>
			<rows>
				<row>
					<grid  width="auto">
						<columns>
							<column label="" width="40%" />
							<column label="" width="60%" />
						</columns>
						<rows>
							<row>
								<label id="lblTitulo" value="Título:" />
								<hlayout>
									<textbox id="txtTitulo" cols="23"
										maxlength="90" disabled="false" constraint="no empty: Título" mold="rounded" width="300px"
										tabindex="1" value="@bind(vm.titulo)" />
								</hlayout>
							</row>
							<row>
								<label id="lblContenido"
									value="Contenido:" />
								<textbox id="txtContenido" width="300px" constraint="no empty: Contenido"
									rows="3" mold="rounded" tabindex="2"
									value="@bind(vm.contenido)" />
							</row>
							<row>
								<label id="lblEnlace" value="Enlace:" />
								<textbox id="txtEnlace" cols="23" constraint="no empty:Enlace"
									maxlength="90" disabled="false" mold="rounded" width="300px"
									tabindex="1" value="@bind(vm.enlaceNoticia)" />
							</row>
							<row>
								<label id="lblFecha"
									value="Fecha Publicacion:" />
								<datebox id="dbfechaPublicacion"
									mold="rounded" format="dd/MM/yyyy" width="300px" tabindex="4"
									value="@bind(vm.fechaRegistro)" />
							</row>
							<row>
								<label id="lblFechaVencimiento"
									value="Fecha Vencimiento:" />
								<datebox id="dbfechaVencimiento"
									mold="rounded" format="dd/MM/yyyy" width="300px" tabindex="4"
									value="@bind(vm.vencimiento)" />
							</row>
						</rows>
					</grid>
					<vlayout>
						<button label="Cargar Imagen" id="btnImagen"
							upload="true"
							onUpload="@command('cargarImagenNoticia',upload=event)">
						</button>
						<groupbox>
							<image id="imgImagen" height="70px"
								width="150px" content="@bind(vm.imagenNoticia)" />
						</groupbox>
					</vlayout>
				</row>
			</rows>
		</grid>
		</groupbox>
		<groupbox>
			<caption label="Listado de Noticias"/>
			<listbox id="lbxNoticias"
				model="@bind(vm.listaNoticia)"
				selectedItem="@bind(vm.noticiaSeleccionada)"
				onSelect="@command('mostrarSeleccionado')"
				emptyMessage="No hay noticias registradas" mold="paging"
				pageSize="10">
				<listhead>
					<listheader label="Id" align="center"
						sort="auto(idNoticia)" > </listheader>
					<listheader label="Titulo" align="center"
						sort="auto(titulo)" > 
					<textbox id="filtroTitulo" instant="true"
							width="50px" value="@bind(vm.filtros.titulo)"
							onChange="@command('filtroNoticia')" />	
							<image src="/imagenes/iconos/buscar.png"/>
					</listheader>
					<listheader label="Contenido" align="center"
						sort="auto(contenido)" >
					<textbox id="filtroContenido" instant="true"
							width="50px" value="@bind(vm.filtros.contenido)"
							onChange="@command('filtroNoticia')" />	
							<image src="/imagenes/iconos/buscar.png"/>
					 </listheader>
					<listheader label="Imagen" align="center" > </listheader>
					<listheader label="Fecha Registro" align="center"
						sort="auto(fechaRegistro)" > </listheader>
					<listheader label="Fecha Vencimiento" align="center"
						sort="auto(vencimiento)" > </listheader>
					<listheader label="Enlace" align="center"
						sort="auto(enlaceNoticia)" > </listheader>
				</listhead>
				<template name="model">
					<listitem selected="false">
						<listcell label="${each.idNoticia}"></listcell>
						<listcell label="${each.titulo}"></listcell>
						<listcell label="${each.contenido}"></listcell>
						<listcell label="">
							<image height="30px" width="60px"
								content="${each.getFotoNoticia().getAImage()}" />
						</listcell>
						<listcell label="${each.fechaRegistro}"></listcell>
						<listcell label="${each.vencimiento}"></listcell>
						<listcell label="${each.enlaceNoticia}"></listcell>
					</listitem>
				</template>
			</listbox>
		</groupbox>
		<div align="right">
			<button id="btnGrabarNoticia" label="Guardar"
				image="/imagenes/iconos/guardar.png" mold="trendy" width="auto"
				height="auto" orient="horizontal"
				onClick="@command('guardarNoticia')" />
			<button id="btnEliminarNoticia" label="Eliminar"
				image="/imagenes/iconos/eliminar.png" mold="trendy" width="auto"
				height="auto" orient="horizontal"
				onClick="@command('eliminarNoticia')" />
			<button id="btnCancelarNoticia" label="Cancelar"
				image="/imagenes/iconos/cancelar.png" mold="trendy" width="auto"
				height="auto" orient="horizontal" onClick="@command('limpiar')" />
		    <button id="btnSalirNoticia" label="Salirr"
				image="/imagenes/iconos/cerrar.png" mold="trendy" width="auto"
				height="auto" orient="horizontal" onClick="winActualizarNoticia.onClose()" />
		</div>
	</window>
</zk>